"use strict";(self.webpackChunkimagery_explorer_apps=self.webpackChunkimagery_explorer_apps||[]).push([[4630],{19480:function(t,e,n){n.d(e,{x:function(){return o}});var r=n(66581);class o{constructor(t){this._allocator=t,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&(0,r.Y)((()=>this._reset())),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*s);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}_grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,s));t++)this._items.push(this._allocator())}}const s=1024},3308:function(t,e,n){function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function o(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}n.d(e,{Ue:function(){return r},Wd:function(){return s},d9:function(){return o}});const s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:s,clone:o,create:r,createView:function(t,e){return new Float64Array(t,e,16)},fromValues:function(t,e,n,r,o,s,i,u,c,a,f,l,E,h,M,I){return[t,e,n,r,o,s,i,u,c,a,f,l,E,h,M,I]}},Symbol.toStringTag,{value:"Module"}))},96303:function(t,e,n){function r(){return[0,0,0,1]}function o(t){return[t[0],t[1],t[2],t[3]]}n.d(e,{Ue:function(){return r},Wd:function(){return s},d9:function(){return o}});const s=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:s,clone:o,create:r,createView:function(t,e){return new Float64Array(t,e,4)},fromValues:function(t,e,n,r){return[t,e,n,r]}},Symbol.toStringTag,{value:"Module"}))},1845:function(t,e,n){n.d(e,{Bh:function(){return f},I6:function(){return C},Jp:function(){return l},Kx:function(){return h},Su:function(){return I},t8:function(){return N},yY:function(){return a}});var r=n(3965),o=n(96303),s=n(81095),i=n(40201),u=n(86717),c=n(56999);function a(t,e,n){n*=.5;const r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function f(t,e){const n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>(0,i.bn)()?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function l(t,e,n){const r=e[0],o=e[1],s=e[2],i=e[3],u=n[0],c=n[1],a=n[2],f=n[3];return t[0]=r*f+i*u+o*a-s*c,t[1]=o*f+i*c+s*u-r*a,t[2]=s*f+i*a+r*c-o*u,t[3]=i*f-r*u-o*c-s*a,t}function E(t,e,n,r){const o=e[0],s=e[1],u=e[2],c=e[3];let a,f,l,E,h,M=n[0],I=n[1],T=n[2],N=n[3];return f=o*M+s*I+u*T+c*N,f<0&&(f=-f,M=-M,I=-I,T=-T,N=-N),1-f>(0,i.bn)()?(a=Math.acos(f),l=Math.sin(a),E=Math.sin((1-r)*a)/l,h=Math.sin(r*a)/l):(E=1-r,h=r),t[0]=E*o+h*M,t[1]=E*s+h*I,t[2]=E*u+h*T,t[3]=E*c+h*N,t}function h(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function M(t,e){const n=e[0]+e[4]+e[8];let r;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{let n=0;e[4]>e[0]&&(n=1),e[8]>e[3*n+n]&&(n=2);const o=(n+1)%3,s=(n+2)%3;r=Math.sqrt(e[3*n+n]-e[3*o+o]-e[3*s+s]+1),t[n]=.5*r,r=.5/r,t[3]=(e[3*o+s]-e[3*s+o])*r,t[o]=(e[3*o+n]+e[3*n+o])*r,t[s]=(e[3*s+n]+e[3*n+s])*r}return t}function I(t,e,n,r){const o=.5*Math.PI/180;e*=o,n*=o,r*=o;const s=Math.sin(e),i=Math.cos(e),u=Math.sin(n),c=Math.cos(n),a=Math.sin(r),f=Math.cos(r);return t[0]=s*c*f-i*u*a,t[1]=i*u*f+s*c*a,t[2]=i*c*a-s*u*f,t[3]=i*c*f+s*u*a,t}const T=c.c,N=c.s,A=c.f,O=l,m=c.b,p=c.g,S=c.l,R=c.i,d=R,_=c.j,L=_,P=c.n,C=c.a,g=c.e;const U=(0,s.Ue)(),F=(0,s.al)(1,0,0),y=(0,s.al)(0,1,0);const D=(0,o.Ue)(),w=(0,o.Ue)();const b=(0,r.Ue)();Object.freeze(Object.defineProperty({__proto__:null,add:A,calculateW:function(t,e){const n=e[0],r=e[1],o=e[2];return t[0]=n,t[1]=r,t[2]=o,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-o*o)),t},conjugate:h,copy:T,dot:p,equals:g,exactEquals:C,fromEuler:I,fromMat3:M,getAxisAngle:f,identity:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},invert:function(t,e){const n=e[0],r=e[1],o=e[2],s=e[3],i=n*n+r*r+o*o+s*s,u=i?1/i:0;return t[0]=-n*u,t[1]=-r*u,t[2]=-o*u,t[3]=s*u,t},len:d,length:R,lerp:S,mul:O,multiply:l,normalize:P,random:function(t){const e=i.FD,n=e(),r=e(),o=e(),s=Math.sqrt(1-n),u=Math.sqrt(n);return t[0]=s*Math.sin(2*Math.PI*r),t[1]=s*Math.cos(2*Math.PI*r),t[2]=u*Math.sin(2*Math.PI*o),t[3]=u*Math.cos(2*Math.PI*o),t},rotateX:function(t,e,n){n*=.5;const r=e[0],o=e[1],s=e[2],i=e[3],u=Math.sin(n),c=Math.cos(n);return t[0]=r*c+i*u,t[1]=o*c+s*u,t[2]=s*c-o*u,t[3]=i*c-r*u,t},rotateY:function(t,e,n){n*=.5;const r=e[0],o=e[1],s=e[2],i=e[3],u=Math.sin(n),c=Math.cos(n);return t[0]=r*c-s*u,t[1]=o*c+i*u,t[2]=s*c+r*u,t[3]=i*c-o*u,t},rotateZ:function(t,e,n){n*=.5;const r=e[0],o=e[1],s=e[2],i=e[3],u=Math.sin(n),c=Math.cos(n);return t[0]=r*c+o*u,t[1]=o*c-r*u,t[2]=s*c+i*u,t[3]=i*c-s*u,t},rotationTo:function(t,e,n){const r=(0,u.k)(e,n);return r<-.999999?((0,u.b)(U,F,e),(0,u.H)(U)<1e-6&&(0,u.b)(U,y,e),(0,u.n)(U,U),a(t,U,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):((0,u.b)(U,e,n),t[0]=U[0],t[1]=U[1],t[2]=U[2],t[3]=1+r,P(t,t))},scale:m,set:N,setAxes:function(t,e,n,r){const o=b;return o[0]=n[0],o[3]=n[1],o[6]=n[2],o[1]=r[0],o[4]=r[1],o[7]=r[2],o[2]=-e[0],o[5]=-e[1],o[8]=-e[2],P(t,M(t,o))},setAxisAngle:a,slerp:E,sqlerp:function(t,e,n,r,o,s){return E(D,e,o,s),E(w,n,r,s),E(t,D,w,2*s*(1-s)),t},sqrLen:L,squaredLength:_,str:function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}},Symbol.toStringTag,{value:"Module"}))},43176:function(t,e,n){n.d(e,{B:function(){return a}});var r=n(19431),o=n(32114),s=n(81095);function i(t,e,n){const r=Math.sin(t),o=Math.cos(t),s=Math.sin(e),i=Math.cos(e),u=n;return u[0]=-r,u[4]=-s*o,u[8]=i*o,u[12]=0,u[1]=o,u[5]=-s*r,u[9]=i*r,u[13]=0,u[2]=0,u[6]=i,u[10]=s,u[14]=0,u[3]=0,u[7]=0,u[11]=0,u[15]=1,u}var u=n(19508),c=n(35925);function a(t,e,n,r){if(null==t||null==r)return!1;const s=(0,u.eT)(t,u.Jz),a=(0,u.eT)(r,u.sp);if(s===a&&!f(a)&&(s!==u.Ej.UNKNOWN||(0,c.fS)(t,r)))return(0,o.vc)(n,e),!0;if(f(a)){const t=u.rf[s][u.Ej.LON_LAT],r=u.rf[u.Ej.LON_LAT][a];return null!=t&&null!=r&&(t(e,0,E,0),r(E,0,h,0),i(l*E[0],l*E[1],n),n[12]=h[0],n[13]=h[1],n[14]=h[2],!0)}if((a===u.Ej.WEB_MERCATOR||a===u.Ej.PLATE_CARREE||a===u.Ej.WGS84)&&(s===u.Ej.WGS84||s===u.Ej.CGCS2000&&a===u.Ej.PLATE_CARREE||s===u.Ej.SPHERICAL_ECEF||s===u.Ej.WEB_MERCATOR)){const t=u.rf[s][u.Ej.LON_LAT],r=u.rf[u.Ej.LON_LAT][a];return null!=t&&null!=r&&(t(e,0,E,0),r(E,0,h,0),s===u.Ej.SPHERICAL_ECEF?function(t,e,n){i(t,e,n),(0,o.p4)(n,n)}(l*E[0],l*E[1],n):(0,o.yR)(n),n[12]=h[0],n[13]=h[1],n[14]=h[2],!0)}return!1}function f(t){return t===u.Ej.SPHERICAL_ECEF||t===u.Ej.SPHERICAL_MARS_PCPF||t===u.Ej.SPHERICAL_MOON_PCPF}const l=(0,r.Vl)(1),E=(0,s.Ue)(),h=(0,s.Ue)()},57022:function(t,e,n){n.d(e,{K:function(){return i}});var r=n(81095),o=n(28105),s=n(22349);function i(t,e,n,r){if((0,o.canProjectWithoutEngine)(t.spatialReference,n)){u[0]=t.x,u[1]=t.y;const o=t.z;return u[2]=o??r??0,(0,s.projectBuffer)(u,t.spatialReference,0,e,n,0,1)}const i=(0,o.tryProjectWithZConversion)(t,n);return!!i&&(e[0]=i?.x,e[1]=i?.y,e[2]=i?.z??r??0,!0)}const u=(0,r.Ue)()},61170:function(t,e,n){n.d(e,{rS:function(){return a}});var r=n(69442),o=n(14685),s=n(35925);const i=new o.Z(r.kU),u=new o.Z(r.JL),c=new o.Z(r.mM);new o.Z(r.pn);function a(t){const e=f.get(t);if(e)return e;let n=i;if(t)if(t===u)n=u;else if(t===c)n=c;else{const e=t.wkid,r=t.latestWkid;if(null!=e||null!=r)(0,s.o$)(e)||(0,s.o$)(r)?n=u:((0,s.ME)(e)||(0,s.ME)(r))&&(n=c);else{const e=t.wkt2??t.wkt;if(e){const t=e.toUpperCase();t===l?n=u:t===E&&(n=c)}}}return f.set(t,n),n}const f=new Map,l=u.wkt.toUpperCase(),E=c.wkt.toUpperCase()},39050:function(t,e,n){n.d(e,{oq:function(){return A},Er:function(){return O},JG:function(){return u},Ue:function(){return i},zu:function(){return l},zk:function(){return f},st:function(){return c},jH:function(){return m}});n(19431);var r=n(86717),o=n(81095),s=n(56999);n(5700),n(68817);(0,o.Ue)(),(0,o.Ue)(),(0,o.Ue)(),(0,o.Ue)(),(0,o.Ue)();function i(t=p){return[t[0],t[1],t[2],t[3]]}s.a,s.e;function u(t,e){return a(e[0],e[1],e[2],e[3],t)}function c(t){return t}function a(t,e,n,r,o=i()){return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o}function f(t,e,n,r=i()){const o=n[0]-e[0],s=n[1]-e[1],u=n[2]-e[2],c=t[0]-e[0],a=t[1]-e[1],f=t[2]-e[2],l=s*f-u*a,E=u*c-o*f,h=o*a-s*c,M=l*l+E*E+h*h,I=Math.abs(M-1)>1e-5&&M>1e-12?1/Math.sqrt(M):1;return r[0]=l*I,r[1]=E*I,r[2]=h*I,r[3]=-(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]),r}function l(t,e,n,o=0,s=Math.floor(n*(1/3)),i=Math.floor(n*(2/3))){if(n<3)return!1;e(h,o);let u=s,c=!1;for(;u<n-1&&!c;)e(M,u),u++,c=!(0,r.j)(h,M);if(!c)return!1;for(u=Math.max(u,i),c=!1;u<n&&!c;)e(I,u),u++,(0,r.f)(T,h,M),(0,r.n)(T,T),(0,r.f)(N,M,I),(0,r.n)(N,N),c=!(0,r.j)(h,I)&&!(0,r.j)(M,I)&&Math.abs((0,r.k)(T,N))<E;return c?(f(h,M,I,t),!0):(0!==o||1!==s||2!==i)&&l(t,e,n,0,1,2)}const E=.99619469809,h=(0,o.Ue)(),M=(0,o.Ue)(),I=(0,o.Ue)(),T=(0,o.Ue)(),N=(0,o.Ue)();function A(t,e){const n=(0,r.k)(t,e.ray.direction),o=-m(t,e.ray.origin);if(o<0&&n>=0)return!1;if(n>-1e-6&&n<1e-6)return o>0;if((o<0||n<0)&&!(o<0&&n<0))return!0;const s=o/n;return n>0?s<e.c1&&(e.c1=s):s>e.c0&&(e.c0=s),e.c0<=e.c1}function O(t,e){const n=(0,r.k)(t,e.ray.direction),o=-m(t,e.ray.origin);if(n>-1e-6&&n<1e-6)return o>0;const s=o/n;return n>0?s<e.c1&&(e.c1=s):s>e.c0&&(e.c0=s),e.c0<=e.c1}function m(t,e){return(0,r.k)(t,e)+t[3]}const p=[0,0,1,0];var S,R;(R=S||(S={}))[R.NONE=0]="NONE",R[R.CLAMP=1]="CLAMP",R[R.INFINITE_MIN=4]="INFINITE_MIN",R[R.INFINITE_MAX=8]="INFINITE_MAX";S.INFINITE_MIN,S.INFINITE_MAX,S.INFINITE_MAX},5700:function(t,e,n){n.d(e,{EU:function(){return u},SR:function(){return i}});var r=n(19431),o=n(86717),s=n(81095);function i(t,e){return(0,o.k)(t,e)/(0,o.l)(t)}function u(t,e){const n=(0,o.k)(t,e)/((0,o.l)(t)*(0,o.l)(e));return-(0,r.ZF)(n)}(0,s.Ue)(),(0,s.Ue)()},68817:function(t,e,n){n.d(e,{MP:function(){return h},vD:function(){return M},WM:function(){return l},o6:function(){return E}});var r=n(66581),o=n(3965),s=n(3308),i=n(96303),u=n(84164),c=n(81095),a=n(52721);class f{constructor(t){this._create=t,this._items=new Array,this._itemsPtr=0}get(){return 0===this._itemsPtr&&(0,r.Y)((()=>this._reset())),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){const t=2*this._itemsPtr;this._items.length>t&&(this._items.length=t),this._itemsPtr=0}static createVec2f64(){return new f(u.Ue)}static createVec3f64(){return new f(c.Ue)}static createVec4f64(){return new f(a.Ue)}static createMat3f64(){return new f(o.Ue)}static createMat4f64(){return new f(s.Ue)}static createQuatf64(){return new f(i.Ue)}get test(){return{length:this._items.length}}}f.createVec2f64();const l=f.createVec3f64(),E=f.createVec4f64(),h=(f.createMat3f64(),f.createMat4f64()),M=f.createQuatf64()},84095:function(t,e,n){n.r(e),n.d(e,{assetMapFromAssetMapsJSON:function(){return O},extractMesh:function(){return T},meshFeatureSetFromJSON:function(){return I}});var r=n(80085),o=n(13802),s=n(86114),i=n(91772),u=n(97518),c=n(67666),a=n(14685),f=n(68403),l=n(57450),E=n(13449),h=n(51211);const M=()=>o.Z.getLogger("esri.rest.support.meshFeatureSet");function I(t,e,n){const o=n.features;n.features=[],delete n.geometryType;const s=h.Z.fromJSON(n);if(s.geometryType="mesh",!n.assetMaps)return s;const i=O(e,n.assetMaps),u=t.sourceSpatialReference??a.Z.WGS84,c=n.globalIdFieldName,{outFields:f}=t,l=null!=f&&f.length>0?(E=f.includes("*")?null:new Set(f),({attributes:t})=>{if(!t)return{};if(!E)return t;for(const e in t)E.has(e)||delete t[e];return t}):()=>({});var E;for(const t of o){const n=T(t,c,u,e,i);null!=n&&s.features.push(new r.Z({geometry:n,attributes:l(t)}))}return s}function T(t,e,n,r,o){const s=t.attributes[e],a=o.get(s);if(null==a)return M().error("mesh-feature-set:asset-not-found","Service returned a feature which was not found in the asset map",t),null;if(!t.geometry)return M().error("mesh-feature-set:no-geometry","Service returned a feature without geometry",t),null;const E=function({attributes:t},e,{transformFieldRoles:n}){const r=t[n.originX],o=t[n.originY],s=t[n.originZ];return new c.Z({x:r,y:o,z:s,spatialReference:e})}(t,n,r),h=i.Z.fromJSON(t.geometry);h.spatialReference=n;const I=function(t,{transformFieldRoles:e}){return new f.Z({translation:[t[e.translationX],-t[e.translationZ],t[e.translationY]],rotationAxis:[t[e.rotationX],-t[e.rotationZ],t[e.rotationY]],rotationAngle:t[e.rotationDeg],scale:[t[e.scaleX],t[e.scaleZ],t[e.scaleY]]})}(t.attributes,r),T=n.isGeographic?"local":"georeferenced",A=function(t){const e=Array.from(t.files.values()),n=new Array;for(const t of e){if(t.status!==N.COMPLETED)return null;const e=new Array;for(const n of t.parts){if(!n)return null;e.push(new l.LL(n.url,n.hash))}n.push(new l.CP(t.name,t.mimeType,e))}return n}(a);return A?u.Z.createWithExternalSource(E,A,{extent:h,transform:I,vertexSpace:T}):u.Z.createIncomplete(E,{extent:h,transform:I,vertexSpace:T})}var N,A;function O(t,e){const n=new Map;for(const r of e){const e=r.parentGlobalId;if(null==e)continue;const o=r.assetName,i=r.assetType,u=r.assetHash,c=r.assetURL,a=r.conversionStatus,f=r.seqNo,l=(0,E.d1)(i,t.supportedFormats);if(!l){M().error("mesh-feature-set:unknown-format",`Service returned an asset of type ${i}, but it does not list it as a supported type`);continue}const h=(0,s.s1)(n,e,(()=>({files:new Map})));(0,s.s1)(h.files,o,(()=>({name:o,type:i,mimeType:l,status:m(a),parts:[]}))).parts[f]={hash:u,url:c}}return n}function m(t){switch(t){case"COMPLETED":case"SUBMITTED":return N.COMPLETED;case"INPROGRESS":return N.PENDING;default:return N.FAILED}}(A=N||(N={}))[A.FAILED=0]="FAILED",A[A.PENDING=1]="PENDING",A[A.COMPLETED=2]="COMPLETED"},85799:function(t,e,n){n.d(e,{U:function(){return r},a:function(){return o}});class r{constructor(t,e,n=e){this.data=t,this.size=e,this.stride=n}}class o extends r{constructor(t,e,n,r=!1,o=n){super(t,n,o),this.indices=e,this.exclusive=r}}},21414:function(t,e,n){var r;n.d(e,{T:function(){return r}}),function(t){t.POSITION="position",t.NORMAL="normal",t.NORMALCOMPRESSED="normalCompressed",t.UV0="uv0",t.COLOR="color",t.SYMBOLCOLOR="symbolColor",t.SIZE="size",t.TANGENT="tangent",t.OFFSET="offset",t.PERSPECTIVEDIVIDE="perspectiveDivide",t.CENTEROFFSETANDDISTANCE="centerOffsetAndDistance",t.LENGTH="length",t.PREVPOSITION="prevPosition",t.NEXTPOSITION="nextPosition",t.SUBDIVISIONFACTOR="subdivisionFactor",t.COLORFEATUREATTRIBUTE="colorFeatureAttribute",t.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute",t.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute",t.DISTANCETOSTART="distanceToStart",t.UVMAPSPACE="uvMapSpace",t.BOUNDINGRECT="boundingRect",t.UVREGION="uvRegion",t.PROFILERIGHT="profileRight",t.PROFILEUP="profileUp",t.PROFILEVERTEXANDNORMAL="profileVertexAndNormal",t.FEATUREVALUE="featureValue",t.INSTANCEMODELORIGINHI="instanceModelOriginHi",t.INSTANCEMODELORIGINLO="instanceModelOriginLo",t.INSTANCEMODEL="instanceModel",t.INSTANCEMODELNORMAL="instanceModelNormal",t.INSTANCECOLOR="instanceColor",t.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute",t.LOCALTRANSFORM="localTransform",t.GLOBALTRANSFORM="globalTransform",t.BOUNDINGSPHERE="boundingSphere",t.MODELORIGIN="modelOrigin",t.MODELSCALEFACTORS="modelScaleFactors",t.FEATUREATTRIBUTE="featureAttribute",t.STATE="state",t.LODLEVEL="lodLevel",t.POSITION0="position0",t.POSITION1="position1",t.NORMAL2COMPRESSED="normal2Compressed",t.COMPONENTINDEX="componentIndex",t.VARIANTOFFSET="variantOffset",t.VARIANTSTROKE="variantStroke",t.VARIANTEXTENSION="variantExtension",t.SIDENESS="sideness",t.START="start",t.END="end",t.UP="up",t.EXTRUDE="extrude",t.OBJECTANDLAYERIDCOLOR="objectAndLayerIdColor",t.INSTANCEOBJECTANDLAYERIDCOLOR="instanceObjectAndLayerIdColor"}(r||(r={}))}}]);